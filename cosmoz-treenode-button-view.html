
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-item/paper-item.html"> 
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">  
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../cosmoz-i18next/cosmoz-i18next.html">
<link rel="import" href="cosmoz-treenode-navigator.html">
<!--
`cosmoz-treenode-navigator`
Navigator through object with treelike datastructure.  
 
@demo demo/index.html 
-->
<dom-module id="cosmoz-treenode-button-view">
	<style is="custom-style" include="iron-flex iron-flex-alignment">

		.treeScroll {
			max-height:600px;
			width:inherit;
			overflow:auto;
		}

		.pathToNode {
			max-width: 320px;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
			direction: rtl;
			text-align:left;
		}

		paper-dialog .buttons {
			@apply(--cosmoz-treenode-button-view-dialog-container);
		}

		#dialogTree {
			min-width: 250px !important;
			width: 450px;
		}

	</style>
	<template>
		<div class="horizontal layout">
			<paper-button class="flex" raised on-tap="openDialogTree">
				<div class="pathToNode">[[ _getButtonLabel(valuePathParts, buttonTextPlaceholder) ]]</div>
			</paper-button>
			<paper-icon-button icon="clear" on-tap="reset" hidden$="[[ !_enableReset(value, noReset) ]]"></paper-icon-button>
		</div>
		<div class="treeNodeWrapper">
			<paper-dialog id="dialogTree" class="treeDialog" modal>
				<h2>[[ dialogText ]]</h2>
				<paper-dialog-scrollable>
					<div class="treeScroll">
						<cosmoz-treenode-navigator chosen-node="{{ chosenNode }}" data="[[ data ]]"
							id="treenodeNavigator"
							highlighted-node-path="{{ highlightedNodePath }}" child-property="[[ childProperty ]]"
							comparison-property="[[ comparisonProperty ]]" search-placeholder="[[ searchPlaceholder ]]"
							separator-sign="[[ separatorSign ]]" local-search-done-text="[[ localSearchDoneText ]]"
							reset-text="[[ resetText ]]" search-min-length="[[ searchMinLength ]]"
							value="{{ value }}" value-path-parts="{{ valuePathParts }}">
							<content></content>
						</cosmoz-treenode-navigator>
					</div>
				</paper-dialog-scrollable>
				<div class="buttons">
					<paper-button dialog-confirm autofocus on-tap="selectNode">[[ _('Select', t) ]]</paper-button>
					<paper-button dialog-dismiss>[[ _('Cancel', t) ]]</paper-button>
				</div>
			</paper-dialog>
		</div>
	</template>
	<script type="text/javascript" src="cosmoz-treenode-button-view.js"></script>
</dom-module>